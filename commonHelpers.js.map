{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport axios from 'axios';\n\nconst refs = {\n    form: document.querySelector('.form'),\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    btnElem: document.querySelector('.btn'),\n}\n\nconst { form, gallery, loader, btnElem } = refs;\n\nloader.classList.add('hidden');\n\nconst searchParams = {\n    key: '42200022-9c7e7676f0f903944c054771a',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: 1,\n    totalResults: 0,\n    q: '',\n}\n\nform.addEventListener('submit', async e => {\n    e.preventDefault();\n    searchParams.q = e.target.elements.input.value;\n\n    if (!searchParams.q) return;\n\n    gallery.innerHTML = '';\n    loader.classList.remove('hidden');\n    \n    searchParams.page = 1;\n    const images = await getPhotoByName();\n    searchParams.totalResults = images.totalHits;\n    createGallery(images);\n    checkBtnStatus();\n    e.target.reset();\n});\n\nbtnElem.addEventListener('click', async () => {\n    searchParams.page += 1;\n    const images = await getPhotoByName();\n    createGallery(images);\n    checkBtnStatus();\n    window.scrollBy({\n       top: 465,\n       behavior: \"smooth\",\n});\n})\n\nasync function getPhotoByName() {\n    const urlParams = new URLSearchParams(searchParams);\n    const response = await axios.get(`https://pixabay.com/api/?${urlParams}`)\n    return response.data;\n} \n\nfunction createGallery(images) {\n    if (images.hits.length === 0) {\n       iziToast.show({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            messageColor: '#FFFFFF',\n            backgroundColor: '#EF4040',\n            position: 'topRight',\n            messageSize: '16px',\n            messageLineHeight: '24px',\n            maxWidth: '432px',\n       });\n        btnElem.classList.add('hidden');\n    } else {\n        const link = images.hits.map(image => `<a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n        <img class=\"gallery-image\"\n        src=\"${image.webformatURL}\"\n        alt=\"${image.tags}\"\n         </a>\n        <div class=\"img-content\">\n        <div>\n        <h3>Likes</h3>\n        <p>${image.likes}</p>\n        </div>\n\n        <div>\n        <h3>Views</h3>\n        <p>${image.views}</p>\n        </div>\n\n        <div>\n        <h3>Comments</h3>\n        <p>${image.comments}</p>\n        </div>\n\n        <div>\n        <h3>Downloads</h3>\n        <p>${image.downloads}</p>\n        </div>\n        </div>\n        `).join('');\n        gallery.insertAdjacentHTML('beforeend', link);\n        btnElem.classList.remove('hidden');\n    }\n    let lightBox = new SimpleLightbox('.gallery-link');\n    lightBox.refresh();\n    loader.classList.add('hidden');\n}\n\nfunction checkBtnStatus() {\n    const maxPage = Math.ceil(searchParams.totalResults / searchParams.per_page);\n    const isLastPage = maxPage === searchParams.page;\n    if (isLastPage) {\n        btnElem.classList.add('hidden');\n        iziToast.show({\n            message: 'We\\'re sorry, but you\\'ve reached the end of search results.',\n            messageColor: '#FFFFFF',\n            backgroundColor: '#ed6205',\n            position: 'bottomRight',\n            messageSize: '16px',\n            messageLineHeight: '24px',\n            maxWidth: '432px',\n       });\n    }\n}\n"],"names":["refs","form","gallery","loader","btnElem","searchParams","e","images","getPhotoByName","createGallery","checkBtnStatus","urlParams","axios","iziToast","link","image","SimpleLightbox"],"mappings":"owBAQA,MAAMA,EAAO,CACT,KAAM,SAAS,cAAc,OAAO,EACpC,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,MAAM,CAC1C,EAEM,CAAE,KAAAC,EAAM,QAAAC,EAAS,OAAAC,EAAQ,QAAAC,CAAO,EAAKJ,EAE3CG,EAAO,UAAU,IAAI,QAAQ,EAE7B,MAAME,EAAe,CACjB,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAM,EACN,aAAc,EACd,EAAG,EACP,EAEAJ,EAAK,iBAAiB,SAAU,MAAMK,GAAK,CAIvC,GAHAA,EAAE,eAAc,EAChBD,EAAa,EAAIC,EAAE,OAAO,SAAS,MAAM,MAErC,CAACD,EAAa,EAAG,OAErBH,EAAQ,UAAY,GACpBC,EAAO,UAAU,OAAO,QAAQ,EAEhCE,EAAa,KAAO,EACpB,MAAME,EAAS,MAAMC,IACrBH,EAAa,aAAeE,EAAO,UACnCE,EAAcF,CAAM,EACpBG,IACAJ,EAAE,OAAO,OACb,CAAC,EAEDF,EAAQ,iBAAiB,QAAS,SAAY,CAC1CC,EAAa,MAAQ,EACrB,MAAME,EAAS,MAAMC,IACrBC,EAAcF,CAAM,EACpBG,IACA,OAAO,SAAS,CACb,IAAK,IACL,SAAU,QACjB,CAAC,CACD,CAAC,EAED,eAAeF,GAAiB,CAC5B,MAAMG,EAAY,IAAI,gBAAgBN,CAAY,EAElD,OADiB,MAAMO,EAAM,IAAI,4BAA4BD,CAAS,EAAE,GACxD,IACpB,CAEA,SAASF,EAAcF,EAAQ,CAC3B,GAAIA,EAAO,KAAK,SAAW,EACxBM,EAAS,KAAK,CACT,QAAS,2EACT,aAAc,UACd,gBAAiB,UACjB,SAAU,WACV,YAAa,OACb,kBAAmB,OACnB,SAAU,OACtB,CAAQ,EACAT,EAAQ,UAAU,IAAI,QAAQ,MAC3B,CACH,MAAMU,EAAOP,EAAO,KAAK,IAAIQ,GAAS,iCAAiCA,EAAM,aAAa;AAAA;AAAA,eAEnFA,EAAM,YAAY;AAAA,eAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,aAKZA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,aAKXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,aAKXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,aAKdA,EAAM,SAAS;AAAA;AAAA;AAAA,SAGnB,EAAE,KAAK,EAAE,EACVb,EAAQ,mBAAmB,YAAaY,CAAI,EAC5CV,EAAQ,UAAU,OAAO,QAAQ,CACpC,CACc,IAAIY,EAAe,eAAe,EACxC,QAAO,EAChBb,EAAO,UAAU,IAAI,QAAQ,CACjC,CAEA,SAASO,GAAiB,CACN,KAAK,KAAKL,EAAa,aAAeA,EAAa,QAAQ,IAC5CA,EAAa,OAExCD,EAAQ,UAAU,IAAI,QAAQ,EAC9BS,EAAS,KAAK,CACV,QAAS,6DACT,aAAc,UACd,gBAAiB,UACjB,SAAU,cACV,YAAa,OACb,kBAAmB,OACnB,SAAU,OACtB,CAAQ,EAER"}